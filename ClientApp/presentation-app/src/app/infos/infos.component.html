<div class="row container-fluid m-0 p-0" *ngIf="currentProject!=null">

    <div class="col-md-10 bg-light p-0">

        <!-- Navbar -->
        <nav class="navbar navbar-expand-md bg-dark text-light justify-content-between sticky-top border-right border-secondary">
            <ul class="navbar-nav mx-2">
                <!-- Page title -->
                <a class="navbar-brand text-light text-weight-bolder" href="/projects"><i class="fas fa-project-diagram"></i> {{currentProject.title}}</a>
            </ul>
          
            <ul class="navbar-nav mx-2">
                <!-- Create Project -->
                <li class="nav-item">
                    <button class="btn btn-dark text-light" type="button" (click)="modify()">Edit</button>
                </li>
            </ul>
        </nav>

        <!-- Infos -->
        <!-- Read mode -->
        <div class="shadow bg-light rounded p-2 m-3" *ngIf="modifyProject == false; else modifyBlock">
            <div class="p-0 m-0 ml-2" *ngFor="let info of currentProject.infos">
                <p *ngIf="info.type==='text'" style="white-space: pre-line">{{info.content}}</p>
                <h2 *ngIf="info.type==='title'" >{{info.content}}</h2>
                <h4 *ngIf="info.type==='subtitle'" >{{info.content}}</h4>
            </div>
        </div>


        <!-- Modify mode -->
        <ng-template #modifyBlock>
            <div class=" shadow bg-light rounded p-2 m-3">
                <div class="mt-1 d-flex" *ngFor="let info of currentProject.infos; index as i"> 
                    <textarea autosize *ngIf="info.type==='text'"  type="text" class="form-control" id="{{i}}" value="{{info.content}}" style="resize: none;" ></textarea>
                    <input *ngIf="info.type==='title'"  type="text" class="form-control form-control-lg font-weight-bolder" id="{{i}}" value="{{info.content}}">
                    <input *ngIf="info.type==='subtitle'"  type="text" class="form-control font-weight-bold" id="{{i}}" value="{{info.content}}">
                    <button class="btn btn-light align-self-center ml-1" (click)="deleteInfo(i)"><i class="fas fa-times text-danger"></i></button>
                </div>



                <div class="form-group form-check d-flex justify-content-between mt-3 mb-0 p-0">
                    <div class = "btn-group">
                        <button class = "btn btn-outline-primary" (click)="addInfo('text')">Add paragraph</button>
                        <button class = "btn btn-outline-primary" (click)="addInfo('title')">Add title</button>
                        <button class = "btn btn-outline-primary" (click)="addInfo('subtitle')">Add subtitle</button>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-success mr-2" (click)=updateProject()>Save</button>
                        <button class="btn btn-secondary" (click)=cancel()>Cancel</button>
                    </div>
                </div>
            </div>
        </ng-template>

    </div>

    <!-- Other projects -->
    <div class="col-md-2 bg-dark">

        <div class="d-flex justify-content-center text-light bg-dark my-4 ">
            <h5>See Other Projects</h5>
        </div>
        <!-- Search item -->
        <form class="form d-flex justify-content-center" action="/projects">
            <input class="form-control form-control-sm d-inline-block w-75 " type="text" placeholder="Search">
            <button class="btn btn-dark d-inline-block mw-25" type="submit">
                <i class="fas fa-search bg-dark text-light"></i>
            </button>
        </form>

        <!--See other projects - For small screens-->
        <button class="btn btn-light toggler d-md-none my-2 bg-dark" type="button" data-toggle="collapse" data-target="#collapsible">
            <i class="fas fa-bars bg-dark text-light"></i>
        </button>

        <div class="collapse" id="collapsible">
            <ul class="list-group list-group-flush my-2">
                <a href="/infos?projectId={{project.projectId}}&userId={{project.userId}}"
                    *ngFor="let project of projects" class="list-group-item btn bg-dark text-light">
                    {{project.title}}
                </a>
            </ul>
        </div>

        <!--See other projects - For big screens-->
        <ul class="list-group list-group-flush my-2 d-none d-md-block">
            <a href="/infos?projectId={{project.projectId}}&userId={{project.userId}}" *ngFor="let project of projects"
                class="list-group-item btn bg-dark text-light">
                {{project.title}}
            </a>
        </ul>
    </div>
</div>


